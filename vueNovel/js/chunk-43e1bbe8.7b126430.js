(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43e1bbe8"],{"17ff":function(t,e,s){"use strict";var r=s("8310"),i=s.n(r);i.a},2909:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var r=s("6b75");function i(t){if(Array.isArray(t))return Object(r["a"])(t)}var a=s("db90"),o=s("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||Object(a["a"])(t)||Object(o["a"])(t)||n()}},"2d3b":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Search"},[s("form",[s("van-search",{ref:"ipt",attrs:{background:"#db3833","show-action":"",placeholder:"书名、作者、关键字"},on:{input:t.searchAuto,clear:t.initData,cancel:t.onCancel,search:t.searchSure},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),t.vshow?s("div",{staticClass:"onput"},[s("div",{staticClass:"model"},[s("div",{staticClass:"title"},[t._v("热门书籍")]),s("div",{staticClass:"list"},t._l(t.hotList,(function(e,r){return s("div",{key:r,staticClass:"alis",on:{click:function(s){t.searchSure(e.word),t.searchKey=e.word}}},[t._v(t._s(e.word))])})),0)]),s("div",{staticClass:"model"},[s("div",{staticClass:"title"},[t._v("热门搜索")]),s("div",{staticClass:"list"},t._l(t.hotBook.newHotWords,(function(e,r){return s("div",{key:r,staticClass:"blis",on:{click:function(s){t.searchSure(e.word),t.searchKey=e.word}}},[t._v(t._s(e.word))])})),0)]),s("div",{staticClass:"model"},[s("div",{staticClass:"title"},[t._v(" 搜索历史 "),s("span",{staticClass:"vicon",on:{click:function(e){return t.deleHistorySearch(0)}}},[s("van-icon",{attrs:{name:"cross"}})],1)]),s("div",{staticClass:"list"},t._l(t.historySearch,(function(e,r){return s("div",{key:r,staticClass:"blis",on:{click:function(s){t.searchSure(e),t.searchKey=e}}},[t._v(" "+t._s(e)+" "),s("span",{staticClass:"vicon",on:{click:function(e){return e.stopPropagation(),t.deleHistorySearch(1,r)}}},[s("van-icon",{attrs:{name:"close"}})],1)])})),0)])]):s("div",{staticClass:"searchList"},[t.searchRecommend.length>0?s("div",{staticClass:"vli"},t._l(t.searchRecommend,(function(e,r){return s("div",{key:r,staticClass:"vlis"},[t._v(t._s(e))])})),0):t._e(),t.searchResult.length>0?s("div",{staticClass:"vlist",on:{scroll:t.scrollEvent}},[s("List",{attrs:{list:t.searchResult}})],1):t._e()])])},i=[],a=(s("99af"),s("fb6a"),s("45fc"),s("a434"),s("498a"),s("2909")),o=s("5530"),n=s("2e90"),c=s("2f62"),h=s("6380"),l={name:"Search",data:function(){return{searchKey:"",searchRecommend:[],searchResult:[],vshow:!0,searchHot:[],hotList:[],hotBook:[],tempList:[],start:0,end:20,historySearch:[]}},computed:Object(o["a"])({},Object(c["b"])({showBottomSelect:function(t){return t.showBottomSelect}})),components:{List:n["a"]},methods:{initData:function(){this.searchRecommend=[],this.searchResult=[],this.tempList=[],this.vshow=!0},searchAuto:function(t){var e=this;this.vshow=!1,this.searchResult=[],"string"==typeof t&&""==t.trim()||null==t?this.initData():this.axios.get("/https://api.zhuishushenqi.com/book/auto-complete?query=".concat(t,"&start=0&limit=2")).then((function(t){t.data.keywords.length,e.searchRecommend=t.data.keywords})).catch((function(t){console.error(t)}))},onCancel:function(){this.vshow=!0,this.initData(),this.$router.go(-1)},searchSure:function(t){var e=this;this.updaeHistorySearch(t),this.initData(),this.start=0,this.end=20,this.vshow=!1,this.axios.get("/https://api.zhuishushenqi.com/book/fuzzy-search?query=".concat(t)).then((function(t){e.tempList=t.data.books,e.searchResult=e.tempList.slice(0,20)})).catch((function(t){console.error(t)}))},getRandom:function(t,e){for(var s=Object(a["a"])(t),r=[],i=0;i<e;i++){var o=Math.floor(Math.random()*s.length);r.push(s[o]),s.splice(o,1)}return r},getSearchHot:function(){var t=this,e=JSON.parse(localStorage.getItem("_searchHot"));e&&e.expires>Date.now()?(this.searchHot=e.data,this.hotList=this.getRandom(this.searchHot,10)):this.axios.get("http://novel.kele8.cn/search-hotwords").then((function(e){t.searchHot=e.data.searchHotWords,t.hotList=t.getRandom(e.data.searchHotWords,10),localStorage.setItem("_searchHot",JSON.stringify({expires:Date.now()+864e5,data:e.data.searchHotWords}))})).catch((function(t){console.error(t)}))},getHotBook:function(){var t=this;this.axios.get("http://novel.kele8.cn/hot-books").then((function(e){t.hotBook=e.data})).catch((function(t){console.error(t)}))},getHistorySearch:function(){var t=JSON.parse(localStorage.getItem("_historySearch"));t&&(this.historySearch=Object(a["a"])(t))},updaeHistorySearch:function(t){var e=this.historySearch.some((function(e){return e==t}));e||(this.historySearch.unshift(t),localStorage.setItem("_historySearch",JSON.stringify(this.historySearch)))},deleHistorySearch:function(t,e){1==t?(this.historySearch.splice(e,1),localStorage.setItem("_historySearch",JSON.stringify(this.historySearch))):(this.historySearch=[],localStorage.removeItem("_historySearch"))},getMore:function(t){this.searchResult.length!=this.tempList.length&&this.searchResult.length>0&&this.searchResult.length<this.tempList.length&&(this.start+=t,this.end+=t,this.end>this.tempList.length&&(this.end=this.tempList.length),this.searchResult=[].concat(Object(a["a"])(this.searchResult),Object(a["a"])(this.tempList.slice(this.start,this.end))),this.isLoad=!0)},scrollEvent:function(t){t.target.scrollTop>120*(this.end-10)&&this.getMore(20)}},created:function(){this.getSearchHot(),this.getHotBook(),this.getHistorySearch(),this.$store.commit(h["a"].SHOW_BOTTOM_SELECT,{data:!1})},mounted:function(){document.querySelector(".Search input").focus()}},u=l,d=(s("2e46"),s("2877")),f=Object(d["a"])(u,r,i,!1,null,"4dc5cfa5",null);e["default"]=f.exports},"2e46":function(t,e,s){"use strict";var r=s("c108"),i=s.n(r);i.a},"2e90":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list"},t._l(t.list,(function(e,i){return r("div",{key:i,staticClass:"lis",attrs:{id:e._id},on:{click:function(s){return t.goBookDetail(e._id)}}},[r("div",{staticClass:"left"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.unescape(e.cover),expression:"unescape(item.cover)"}]})]),r("div",{staticClass:"right"},[r("h3",[t._v(t._s(e.title))]),r("div",{staticClass:"bookInfo"},[r("img",{staticClass:"userIcon",attrs:{src:s("ba97"),alt:""}}),r("div",{staticClass:"user"},[t._v(t._s(e.author))]),e.retentionRatio>0?r("div",{staticClass:"vtype"},[t._v(t._s(e.retentionRatio)+"留存")]):t._e()]),r("h5",[t._v(t._s(e.shortIntro))])])])})),0)},i=[],a=(s("d3b7"),s("ac1f"),s("25f0"),s("5319"),{name:"List",props:{list:Array},methods:{unescape:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return unescape(t).replace("/agent/","")})),goBookDetail:function(t){this.$router.push({path:"/bookDetail/".concat(t)})}}}),o=a,n=(s("17ff"),s("2877")),c=Object(n["a"])(o,r,i,!1,null,"9d337320",null);e["a"]=c.exports},"45fc":function(t,e,s){"use strict";var r=s("23e7"),i=s("b727").some,a=s("a640"),o=s("ae40"),n=a("some"),c=o("some");r({target:"Array",proto:!0,forced:!n||!c},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"498a":function(t,e,s){"use strict";var r=s("23e7"),i=s("58a8").trim,a=s("c8d2");r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var r=s("1d80"),i=s("5899"),a="["+i+"]",o=RegExp("^"+a+a+"*"),n=RegExp(a+a+"*$"),c=function(t){return function(e){var s=String(r(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(n,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},8310:function(t,e,s){},"99af":function(t,e,s){"use strict";var r=s("23e7"),i=s("d039"),a=s("e8b5"),o=s("861d"),n=s("7b0b"),c=s("50c4"),h=s("8418"),l=s("65f0"),u=s("1dde"),d=s("b622"),f=s("2d00"),v=d("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",g=f>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),y=u("concat"),S=function(t){if(!o(t))return!1;var e=t[v];return void 0!==e?!!e:a(t)},b=!g||!y;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,s,r,i,a,o=n(this),u=l(o,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(a=-1===e?o:arguments[e],S(a)){if(i=c(a.length),d+i>m)throw TypeError(p);for(s=0;s<i;s++,d++)s in a&&h(u,d,a[s])}else{if(d>=m)throw TypeError(p);h(u,d++,a)}return u.length=d,u}})},a434:function(t,e,s){"use strict";var r=s("23e7"),i=s("23cb"),a=s("a691"),o=s("50c4"),n=s("7b0b"),c=s("65f0"),h=s("8418"),l=s("1dde"),u=s("ae40"),d=l("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,m=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var s,r,l,u,d,f,y=n(this),S=o(y.length),b=i(t,S),_=arguments.length;if(0===_?s=r=0:1===_?(s=0,r=S-b):(s=_-2,r=m(v(a(e),0),S-b)),S+s-r>p)throw TypeError(g);for(l=c(y,r),u=0;u<r;u++)d=b+u,d in y&&h(l,u,y[d]);if(l.length=r,s<r){for(u=b;u<S-r;u++)d=u+r,f=u+s,d in y?y[f]=y[d]:delete y[f];for(u=S;u>S-r+s;u--)delete y[u-1]}else if(s>r)for(u=S-r;u>b;u--)d=u+r-1,f=u+s-1,d in y?y[f]=y[d]:delete y[f];for(u=0;u<s;u++)y[u+b]=arguments[u+2];return y.length=S-r+s,l}})},c108:function(t,e,s){},c8d2:function(t,e,s){var r=s("d039"),i=s("5899"),a="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||a[t]()!=a||i[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-43e1bbe8.7b126430.js.map